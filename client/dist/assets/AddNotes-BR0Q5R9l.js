import{u as g,_,r as i,U as v,j as e}from"./index-D2Kp2z1Q.js";function S(){const f=g(),b=decodeURIComponent(_.load("token")),{exitUserId:u,api:j}=i.useContext(v),[x,h]=i.useState(!1),[a,c]=i.useState({coaching_id:"",notes_name:"",note_file:null,classes:"",streams:"",subject:""}),[t,r]=i.useState({}),o=s=>{const{name:l,value:d,files:m}=s.target;c(l==="note_file"?{...a,note_file:m[0]}:{...a,[l]:d}),r({})},p=()=>{const s={};if(a.notes_name||(s.notes_name="Note Name is required"),!a.note_file)s.note_file="Note file is required";else{const l=a.note_file;l.type!=="application/pdf"&&(s.note_file="Only PDF files are allowed"),l.size>5*1024*1024&&(s.note_file="File size should be less than 5 MB")}return a.classes||(s.classes="Class is required"),a.subject||(s.subject="Subject is required"),x&&!a.streams&&(s.streams="Streams is required"),s},N=async s=>{s.preventDefault();const l=p();if(Object.keys(l).length===0){r({});const d=s.target,m=new FormData(d);try{let n=await fetch(`${j}/addnotes`,{method:"POST",headers:{Authorization:`Bearer ${b}`},body:m});n=await n.json(),n.status?f("/dashboard/viewNotes"):r({submit:n.msg})}catch(n){console.log(n)}}else r(l)};return e.jsxs("div",{className:"max-w-2xl mx-auto mt-10 p-4",children:[e.jsx("h1",{className:"text-2xl font-semibold text-center mb-6",children:"Add Notes"}),e.jsxs("form",{className:"space-y-6",onSubmit:N,children:[e.jsx("input",{type:"hidden",name:"coaching_id",value:u||""}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700",htmlFor:"notes_name",children:"Note Name"}),e.jsx("input",{id:"notes_name",name:"notes_name",type:"text",placeholder:"Note Name",value:a.notes_name,onChange:o,className:`w-full p-2 border focus:outline-none ${t.notes_name?"border-red-500":"border-gray-300"} rounded`}),t.notes_name&&e.jsx("p",{className:"text-red-500 text-sm",children:t.notes_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700",htmlFor:"note_file",children:"Note File"}),e.jsx("input",{id:"note_file",name:"note_file",type:"file",accept:"application/pdf",onChange:o,className:`w-full p-2 border focus:outline-none ${t.note_file?"border-red-500":"border-gray-300"} rounded`}),t.note_file&&e.jsx("p",{className:"text-red-500 text-sm",children:t.note_file})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700",htmlFor:"classes",children:"Class"}),e.jsxs("select",{id:"classes",name:"classes",value:a.classes,onChange:s=>{c({...a,classes:s.target.value}),["11","12"].includes(s.target.value)?h(!0):h(!1)},className:"w-full focus:outline-none p-2 border rounded bg-neutral-50 mt-2",children:[e.jsx("option",{value:"",children:"Class"}),Array.from({length:12},(s,l)=>l+1).map(s=>e.jsx("option",{value:s,children:s},s))]}),t.classes&&e.jsx("p",{className:"text-red-500 text-sm",children:t.classes})]}),x&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700",htmlFor:"streams",children:"Streams"}),e.jsxs("select",{id:"streams",name:"streams",value:a.streams,onChange:o,className:"w-full p-2 border focus:outline-none rounded bg-neutral-50 mt-2",children:[e.jsx("option",{value:"",children:"Streams"}),["Science","Arts","Commerce"].map(s=>e.jsx("option",{value:s,children:s},s))]}),t.streams&&e.jsx("p",{className:"text-red-500 text-sm",children:t.streams})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700",htmlFor:"subject",children:"Subject"}),e.jsx("input",{id:"subject",name:"subject",type:"text",placeholder:"Subject",value:a.subject,onChange:o,className:`w-full p-2 border focus:outline-none ${t.subject?"border-red-500":"border-gray-300"} rounded`}),t.subject&&e.jsx("p",{className:"text-red-500 text-sm",children:t.subject})]}),e.jsx("div",{className:"mb-4 flex justify-end",children:e.jsx("button",{type:"submit",className:"px-3 bg-green-500 text-lg text-white font-semibold py-2 rounded",children:"Add Note"})})]}),t.submit&&e.jsx("p",{className:"text-red-500 text-center text-sm mt-4",children:t.submit})]})}export{S as default};
