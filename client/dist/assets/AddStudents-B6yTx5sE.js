import{u as g,_ as v,r as i,U as N,j as e}from"./index-D2Kp2z1Q.js";function C(){const u=g(),h=decodeURIComponent(v.load("token")),{exitUserId:c,api:p}=i.useContext(N),[m,x]=i.useState(!1),[t,o]=i.useState({coaching_id:"",firstname:"",lastname:"",email:"",address:"",city:"",state:"",role:"student",classes:"",streams:"",password:""}),[a,n]=i.useState({}),r=s=>{o({...t,[s.target.name]:s.target.value}),n({})},f=()=>{const s={};return t.firstname||(s.firstname="First Name is required"),t.lastname||(s.lastname="Last Name is required"),t.email||(s.email="Email is required"),t.address||(s.address="Address is required"),t.state||(s.state="State is required"),t.city||(s.city="City is required"),t.classes||(s.classes="Class is required"),m&&(t.streams||(s.streams="streams is required")),s},j=async s=>{s.preventDefault();const l=f();if(Object.keys(l).length===0){n({});const b=s.target,y=new FormData(b);try{let d=await fetch(`${p}/addstudents`,{method:"POST",headers:{Authorization:`Bearer ${h}`},body:y});d=await d.json(),d.status?u("/dashboard/viewStudent"):(l.email=d.msg,n(l))}catch(d){console.log(d)}}else n(l)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"max-w-2xl mx-auto mt-10 p-4",children:[e.jsx("h1",{className:"text-2xl font-semibold text-center mb-6",children:"Add Students"}),e.jsxs("form",{className:"space-y-6",onSubmit:j,children:[e.jsx("input",{type:"hidden",name:"role",value:t.role}),e.jsx("input",{type:"hidden",name:"password",value:"password"}),e.jsx("input",{type:"hidden",name:"coaching_id",value:c||""}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700",htmlFor:"firstname",children:"Name"}),e.jsxs("div",{className:"flex  flex-col md:flex-row md:space-x-4 space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"w-full md:w-1/2",children:[e.jsx("input",{id:"firstname",name:"firstname",type:"text",placeholder:"First Name",value:t.firstname,onChange:r,className:`w-full p-2 border focus:outline-none ${a.firstname?"border-red-500":"border-gray-300"} rounded`}),a.firstname&&e.jsx("p",{className:"text-red-500 text-sm",children:a.firstname})]}),e.jsxs("div",{className:"w-full md:w-1/2",children:[e.jsx("input",{id:"lastname",name:"lastname",type:"text",placeholder:"Last Name",value:t.lastname,onChange:r,className:`w-full p-2 border focus:outline-none ${a.lastname?"border-red-500":"border-gray-300"} rounded`}),a.lastname&&e.jsx("p",{className:"text-red-500 text-sm",children:a.lastname})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700",htmlFor:"email",children:"Email Address"}),e.jsx("input",{id:"email",name:"email",type:"email",value:t.email,onChange:r,className:`w-full p-2 border focus:outline-none ${a.email?"border-red-500":"border-gray-300"} rounded`}),a.email&&e.jsx("p",{className:"text-red-500 text-sm",children:a.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700",htmlFor:"address1",children:"Address"}),e.jsx("input",{id:"address",name:"address",type:"text",placeholder:"Street Address",value:t.address,onChange:r,className:`w-full p-2 border focus:outline-none ${a.address?"border-red-500":"border-gray-300"} rounded`}),a.address&&e.jsx("p",{className:"text-red-500 text-sm",children:a.address}),e.jsxs("div",{className:"flex flex-col mt-8 md:flex-row md:space-x-4 space-y-4 md:space-y-0",children:[e.jsxs("div",{children:[e.jsx("input",{id:"city",name:"city",type:"text",placeholder:"City",value:t.city,onChange:r,className:`w-full p-2 border focus:outline-none ${a.city?"border-red-500":"border-gray-300"} rounded`}),a.city&&e.jsx("p",{className:"text-red-500 text-sm",children:a.city})]}),e.jsxs("div",{children:[e.jsx("input",{id:"state",name:"state",type:"text",placeholder:"State / Province",value:t.state,onChange:r,className:`w-full p-2 border  focus:outline-none ${a.state?"border-red-500":"border-gray-300"} rounded`}),a.state&&e.jsx("p",{className:"text-red-500 text-sm",children:a.state})]})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700",htmlFor:"address1",children:"Class"}),e.jsxs("select",{className:"w-full  border rounded bg-neutral-50 mt-2 p-2 text-base md:text-lg focus:outline-none",name:"classes",value:t.classes,onChange:s=>{o({...t,classes:s.target.value}),["11","12"].includes(s.target.value)?x(!0):x(!1)},children:[e.jsx("option",{value:"",children:"Class"}),Array.from({length:12},(s,l)=>l+1).map(s=>e.jsx("option",{value:s,children:s},s))]}),a.classes&&e.jsx("p",{className:"text-red-500 text-sm",children:a.classes})]}),m&&e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"block text-gray-700",htmlFor:"address1",children:"Streams"}),e.jsxs("select",{className:"w-full  border rounded bg-neutral-50 mt-2 p-2 text-base md:text-lg focus:outline-none",name:"streams",value:t.streams,onChange:s=>{o({...t,streams:s.target.value})},children:[e.jsx("option",{value:"",children:"Streams"}),["Sciencs","Arts","Commerce"].map(s=>e.jsx("option",{value:s,children:s},s))]}),a.streams&&e.jsx("p",{className:"text-red-500 text-sm",children:a.streams})]})]}),e.jsx("div",{className:"mb-4 flex justify-end",children:e.jsx("button",{type:"submit",className:" px-3 bg-green-500 text-lg text-white font-semibold py-2 rounded",children:"Add student"})})]})]})})}export{C as default};
