import{u as _,_ as N,r as n,U as v,j as e}from"./index-D2Kp2z1Q.js";function S(){const f=_(),b=decodeURIComponent(N.load("token")),{exitUserId:u,api:j}=n.useContext(v),[x,h]=n.useState(!1),[t,i]=n.useState({coaching_id:"",module_name:"",module_file:null,classes:"",streams:"",subject:""}),[l,o]=n.useState({}),d=s=>{const{name:a,value:c,files:m}=s.target;i(a==="module_file"?{...t,module_file:m[0]}:{...t,[a]:c}),o({})},p=()=>{const s={};if(t.module_name||(s.module_name="Module Name is required"),!t.module_file)s.module_file="Module file is required";else{const a=t.module_file;a.type!=="application/pdf"&&(s.module_file="Only PDF files are allowed"),a.size>5*1024*1024&&(s.module_file="File size should be less than 5 MB")}return t.classes||(s.classes="Class is required"),t.subject||(s.subject="Subject is required"),x&&!t.streams&&(s.streams="Streams is required"),s},g=async s=>{s.preventDefault();const a=p();if(Object.keys(a).length===0){o({});const c=s.target,m=new FormData(c);try{let r=await fetch(`${j}/addModules`,{method:"POST",headers:{Authorization:`Bearer ${b}`},body:m});r=await r.json(),r.status?f("/dashboard/viewModules"):o({submit:r.msg})}catch(r){console.log(r)}}else o(a)};return e.jsxs("div",{className:"max-w-2xl mx-auto mt-10 p-4",children:[e.jsx("h1",{className:"text-2xl font-semibold text-center mb-6",children:"Add Module"}),e.jsxs("form",{className:"space-y-6",onSubmit:g,children:[e.jsx("input",{type:"hidden",name:"coaching_id",value:u||""}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700",htmlFor:"module_name",children:"Module Name"}),e.jsx("input",{id:"module_name",name:"module_name",type:"text",placeholder:"Module Name",value:t.module_name,onChange:d,className:`w-full p-2 border focus:outline-none ${l.module_name?"border-red-500":"border-gray-300"} rounded`}),l.module_name&&e.jsx("p",{className:"text-red-500 text-sm",children:l.module_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700",htmlFor:"module_file",children:"Module File"}),e.jsx("input",{id:"module_file",name:"module_file",type:"file",accept:"application/pdf",onChange:d,className:`w-full p-2 border focus:outline-none ${l.module_file?"border-red-500":"border-gray-300"} rounded`}),l.module_file&&e.jsx("p",{className:"text-red-500 text-sm",children:l.module_file})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700",htmlFor:"classes",children:"Class"}),e.jsxs("select",{id:"classes",name:"classes",value:t.classes,onChange:s=>{i({...t,classes:s.target.value}),["11","12"].includes(s.target.value)?h(!0):h(!1)},className:"w-full focus:outline-none p-2 border rounded bg-neutral-50 mt-2",children:[e.jsx("option",{value:"",children:"Class"}),Array.from({length:12},(s,a)=>a+1).map(s=>e.jsx("option",{value:s,children:s},s))]}),l.classes&&e.jsx("p",{className:"text-red-500 text-sm",children:l.classes})]}),x&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700",htmlFor:"streams",children:"Streams"}),e.jsxs("select",{id:"streams",name:"streams",value:t.streams,onChange:d,className:"w-full p-2 border focus:outline-none rounded bg-neutral-50 mt-2",children:[e.jsx("option",{value:"",children:"Streams"}),["Science","Arts","Commerce"].map(s=>e.jsx("option",{value:s,children:s},s))]}),l.streams&&e.jsx("p",{className:"text-red-500 text-sm",children:l.streams})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700",htmlFor:"subject",children:"Subject"}),e.jsx("input",{id:"subject",name:"subject",type:"text",placeholder:"Subject",value:t.subject,onChange:d,className:`w-full p-2 border focus:outline-none ${l.subject?"border-red-500":"border-gray-300"} rounded`}),l.subject&&e.jsx("p",{className:"text-red-500 text-sm",children:l.subject})]}),e.jsx("div",{className:"mb-4 flex justify-end",children:e.jsx("button",{type:"submit",className:"px-3 bg-green-500 text-lg text-white font-semibold py-2 rounded",children:"Add Module"})})]}),l.submit&&e.jsx("p",{className:"text-red-500 text-center text-sm mt-4",children:l.submit})]})}export{S as default};
