import{u as _,_ as N,r as i,U as v,j as e}from"./index-D2Kp2z1Q.js";function D(){const h=_(),f=decodeURIComponent(N.load("token")),{exitUserId:m,api:b}=i.useContext(v),[u,x]=i.useState(!1),[a,c]=i.useState({coaching_id:"",dpp_name:"",dpp_file:null,classes:"",streams:"",subject:""}),[t,n]=i.useState({}),d=s=>{const{name:l,value:o,files:p}=s.target;c(l==="dpp_file"?{...a,dpp_file:p[0]}:{...a,[l]:o}),n({})},j=()=>{const s={};if(a.dpp_name||(s.dpp_name="Dpp Name is required"),!a.dpp_file)s.dpp_file="Dpp file is required";else{const l=a.dpp_file;l.type!=="application/pdf"&&(s.dpp_file="Only PDF files are allowed"),l.size>5*1024*1024&&(s.dpp_file="File size should be less than 5 MB")}return a.classes||(s.classes="Class is required"),a.subject||(s.subject="Subject is required"),u&&!a.streams&&(s.streams="Streams is required"),s},g=async s=>{s.preventDefault();const l=j();if(Object.keys(l).length===0){n({});const o=s.target,p=new FormData(o);try{let r=await fetch(`${b}/addDpp`,{method:"POST",headers:{Authorization:`Bearer ${f}`},body:p});r=await r.json(),r.status?h("/dashboard/viewDpp"):n({submit:r.msg})}catch(r){console.log(r)}}else n(l)};return e.jsxs("div",{className:"max-w-2xl mx-auto mt-10 p-4",children:[e.jsx("h1",{className:"text-2xl font-semibold text-center mb-6",children:"Add Dpp"}),e.jsxs("form",{className:"space-y-6",onSubmit:g,children:[e.jsx("input",{type:"hidden",name:"coaching_id",value:m||""}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700",htmlFor:"dpp_name",children:"Dpp Name"}),e.jsx("input",{id:"dpp_name",name:"dpp_name",type:"text",placeholder:"Dpp Name",value:a.dpp_name,onChange:d,className:`w-full p-2 border focus:outline-none ${t.dpp_name?"border-red-500":"border-gray-300"} rounded`}),t.dpp_name&&e.jsx("p",{className:"text-red-500 text-sm",children:t.dpp_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700",htmlFor:"dpp_file",children:"Dpp File"}),e.jsx("input",{id:"dpp_file",name:"dpp_file",type:"file",accept:"application/pdf",onChange:d,className:`w-full p-2 border focus:outline-none ${t.dpp_file?"border-red-500":"border-gray-300"} rounded`}),t.dpp_file&&e.jsx("p",{className:"text-red-500 text-sm",children:t.dpp_file})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700",htmlFor:"classes",children:"Class"}),e.jsxs("select",{id:"classes",name:"classes",value:a.classes,onChange:s=>{c({...a,classes:s.target.value}),["11","12"].includes(s.target.value)?x(!0):x(!1)},className:"w-full focus:outline-none p-2 border rounded bg-neutral-50 mt-2",children:[e.jsx("option",{value:"",children:"Class"}),Array.from({length:12},(s,l)=>l+1).map(s=>e.jsx("option",{value:s,children:s},s))]}),t.classes&&e.jsx("p",{className:"text-red-500 text-sm",children:t.classes})]}),u&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700",htmlFor:"streams",children:"Streams"}),e.jsxs("select",{id:"streams",name:"streams",value:a.streams,onChange:d,className:"w-full p-2 border focus:outline-none rounded bg-neutral-50 mt-2",children:[e.jsx("option",{value:"",children:"Streams"}),["Science","Arts","Commerce"].map(s=>e.jsx("option",{value:s,children:s},s))]}),t.streams&&e.jsx("p",{className:"text-red-500 text-sm",children:t.streams})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700",htmlFor:"subject",children:"Subject"}),e.jsx("input",{id:"subject",name:"subject",type:"text",placeholder:"Subject",value:a.subject,onChange:d,className:`w-full p-2 border focus:outline-none ${t.subject?"border-red-500":"border-gray-300"} rounded`}),t.subject&&e.jsx("p",{className:"text-red-500 text-sm",children:t.subject})]}),e.jsx("div",{className:"mb-4 flex justify-end",children:e.jsx("button",{type:"submit",className:"px-3 bg-green-500 text-lg text-white font-semibold py-2 rounded",children:"Add Dpp"})})]}),t.submit&&e.jsx("p",{className:"text-red-500 text-center text-sm mt-4",children:t.submit})]})}export{D as default};
