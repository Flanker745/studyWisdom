import{r as o,U as y,u as N,j as e,L as v,_ as m}from"./index-D2Kp2z1Q.js";function S(){const{api:i,setUser:u,setExistUser:p,setExitUserId:x}=o.useContext(y),h=N(),[r,g]=o.useState({email:"",password:""}),[n,j]=o.useState({}),[l,w]=o.useState(""),d=a=>{g({...r,[a.target.name]:a.target.value})},b=()=>{const a={};return r.email||(a.email="Email is required"),r.password||(a.password="Password is required"),a},f=async a=>{a.preventDefault();const c=b();if(Object.keys(c).length===0)try{let s=await fetch(`${i}/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(s=await s.json(),s.status){m.save("token",s.auth),m.save("id",encodeURIComponent(s.userdata._id));let t=await fetch(`${i}/test`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:s.userdata._id})});t=await t.json(),p(t==null?void 0:t.status),t.status&&x(t==null?void 0:t.exitId),u(s==null?void 0:s.userdata),h("/")}else w(s.msg)}catch(s){console.log(s)}else j(c)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"max-w-md mx-auto mt-10 p-4",children:[e.jsx("h1",{className:"text-2xl text-center font-semibold mb-6",children:"Login"}),l&&e.jsx("p",{className:"text-red-500 text-center mb-4",children:l}),e.jsxs("form",{className:"space-y-6",onSubmit:f,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700",htmlFor:"email",children:"Email Address"}),e.jsx("input",{id:"email",type:"email",name:"email",value:r.email,onChange:d,className:`w-full p-2 border ${n.email?"border-red-500":"border-gray-300"} rounded`}),n.email&&e.jsx("p",{className:"text-red-500 text-sm",children:n.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700",htmlFor:"password",children:"Password"}),e.jsx("input",{id:"password",name:"password",type:"password",value:r.password,onChange:d,className:`w-full p-2 border ${n.password?"border-red-500":"border-gray-300"} rounded`}),n.password&&e.jsx("p",{className:"text-red-500 text-sm",children:n.password})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"w-full p-2 bg-blue-600 text-white rounded",children:"Login"})})]}),e.jsxs("p",{className:"mt-6 text-center",children:["Don't have an account?"," ",e.jsx(v,{to:"/signup",className:"text-blue-600",children:"Sign Up"})]})]})})}export{S as default};
