import{u as _,_ as N,r as c,U as v,j as e}from"./index-D2Kp2z1Q.js";function S(){const f=_(),b=decodeURIComponent(N.load("token")),{exitUserId:m,api:j}=c.useContext(v),[x,h]=c.useState(!1),[l,o]=c.useState({coaching_id:"",result_name:"",result_file:null,classes:"",streams:"",subject:""}),[t,n]=c.useState({}),i=s=>{const{name:a,value:u,files:d}=s.target;o(a==="result_file"?{...l,result_file:d[0]}:{...l,[a]:u}),n({})},p=()=>{const s={};if(l.result_name||(s.result_name="Result Name is required"),!l.result_file)s.result_file="Result file is required";else{const a=l.result_file;a.type!=="application/pdf"&&(s.result_file="Only PDF files are allowed"),a.size>5*1024*1024&&(s.result_file="File size should be less than 5 MB")}return l.classes||(s.classes="Class is required"),l.subject||(s.subject="Subject is required"),x&&!l.streams&&(s.streams="Streams is required"),s},g=async s=>{s.preventDefault();const a=p();if(Object.keys(a).length===0){n({});const u=s.target,d=new FormData(u);try{let r=await fetch(`${j}/addresults`,{method:"POST",headers:{Authorization:`Bearer ${b}`},body:d});r=await r.json(),r.status?f("/dashboard/viewResults"):n({submit:r.msg})}catch(r){console.log(r)}}else n(a)};return e.jsxs("div",{className:"max-w-2xl mx-auto mt-10 p-4",children:[e.jsx("h1",{className:"text-2xl font-semibold text-center mb-6",children:"Add Result"}),e.jsxs("form",{className:"space-y-6",onSubmit:g,children:[e.jsx("input",{type:"hidden",name:"coaching_id",value:m||""}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700",htmlFor:"result_name",children:"Result Name"}),e.jsx("input",{id:"result_name",name:"result_name",type:"text",placeholder:"Result Name",value:l.result_name,onChange:i,className:`w-full p-2 border focus:outline-none ${t.result_name?"border-red-500":"border-gray-300"} rounded`}),t.result_name&&e.jsx("p",{className:"text-red-500 text-sm",children:t.result_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700",htmlFor:"result_file",children:"Result File"}),e.jsx("input",{id:"result_file",name:"result_file",type:"file",accept:"application/pdf",onChange:i,className:`w-full p-2 border focus:outline-none ${t.result_file?"border-red-500":"border-gray-300"} rounded`}),t.result_file&&e.jsx("p",{className:"text-red-500 text-sm",children:t.result_file})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700",htmlFor:"classes",children:"Class"}),e.jsxs("select",{id:"classes",name:"classes",value:l.classes,onChange:s=>{o({...l,classes:s.target.value}),["11","12"].includes(s.target.value)?h(!0):h(!1)},className:"w-full focus:outline-none p-2 border rounded bg-neutral-50 mt-2",children:[e.jsx("option",{value:"",children:"Class"}),Array.from({length:12},(s,a)=>a+1).map(s=>e.jsx("option",{value:s,children:s},s))]}),t.classes&&e.jsx("p",{className:"text-red-500 text-sm",children:t.classes})]}),x&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700",htmlFor:"streams",children:"Streams"}),e.jsxs("select",{id:"streams",name:"streams",value:l.streams,onChange:i,className:"w-full p-2 border focus:outline-none rounded bg-neutral-50 mt-2",children:[e.jsx("option",{value:"",children:"Streams"}),["Science","Arts","Commerce"].map(s=>e.jsx("option",{value:s,children:s},s))]}),t.streams&&e.jsx("p",{className:"text-red-500 text-sm",children:t.streams})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700",htmlFor:"subject",children:"Subject"}),e.jsx("input",{id:"subject",name:"subject",type:"text",placeholder:"Subject",value:l.subject,onChange:i,className:`w-full p-2 border focus:outline-none ${t.subject?"border-red-500":"border-gray-300"} rounded`}),t.subject&&e.jsx("p",{className:"text-red-500 text-sm",children:t.subject})]}),e.jsx("div",{className:"mb-4 flex justify-end",children:e.jsx("button",{type:"submit",className:"px-3 bg-green-500 text-lg text-white font-semibold py-2 rounded",children:"Add Result"})})]}),t.submit&&e.jsx("p",{className:"text-red-500 text-center text-sm mt-4",children:t.submit})]})}export{S as default};
