import{u as v,r as l,U as C,j as e,L as k}from"./index-D2Kp2z1Q.js";function E(){v();const[p,g]=l.useState([]),[a,h]=l.useState(1),[n]=l.useState(10),[y,b]=l.useState(0);l.useState(null);const{exitUserId:i,api:o}=l.useContext(C),[m,f]=l.useState(!1);l.useEffect(()=>{i&&(async s=>{try{const c=await(await fetch(`${o}/viewModules/${s}?page=${a}&limit=${n}`)).json();c.status?(g(c.modules),b(c.total)):console.log("Failed to fetch data")}catch(r){console.error("Error fetching data:",r)}})(i)},[a,i,m]);const j=async t=>{try{(await(await fetch(`${o}/deleteCoching/${t}`,{method:"DELETE"})).json()).status?(g(p.filter(c=>c._id!==t)),console.log("module deleted successfully")):console.log("Failed to delete note")}catch(s){console.error("Error deleting note:",s)}},w=async(t,s)=>{try{(await(await fetch(`${o}/update-status`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:s,student:"Modules",id:t})})).json()).status&&f(!m)}catch(r){console.log(r)}},u=Math.ceil(y/n),d=t=>h(t),N=()=>{const t=[];for(let x=1;x<=u;x++)t.push(x);const s=t.indexOf(a),r=s-1>0?s-1:0,c=s+2<t.length?s+2:t.length-1;return t.slice(r,c+1)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex",children:e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"m-auto border-2 my-9 rounded-lg ",children:[e.jsx("h2",{className:"text-3xl font-semibold text-center py-4 ",children:"View Modules"}),e.jsx("div",{className:"w-[95%] border border-gray-200 m-auto overflow-x-auto ",children:e.jsxs("div",{className:"w-full bg-white ",children:[e.jsx("div",{className:"bg-gray-50",children:e.jsxs("div",{className:"grid grid-cols-8 gap-4 w-full",children:[e.jsx("div",{className:"col-span-1 border-b border-gray-200 px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Sr No."}),e.jsx("div",{className:"col-span-1 border-b border-gray-200 px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Name"}),e.jsx("div",{className:"col-span-1 border-b border-gray-200 px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"File"}),e.jsx("div",{className:"col-span-1 border-b border-gray-200 px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Class"}),e.jsx("div",{className:"col-span-1 border-b border-gray-200 px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subject"}),e.jsx("div",{className:"col-span-1 border-b border-gray-200 px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Streams"}),e.jsx("div",{className:"col-span-2 border-b border-gray-200 px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("div",{className:"divide-y divide-gray-200",children:p.map((t,s)=>e.jsxs("div",{className:"grid grid-cols-8 gap-4 w-full",children:[e.jsx("div",{className:"col-span-1 px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:n*(a-1)+s+1}),e.jsx("div",{className:"col-span-1 px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t.module_name}),e.jsx("div",{className:"col-span-1 px-6 py-4 max-w-[300px] text-sm text-gray-500 cursor-pointer",onClick:()=>{window.open(t.module_file_path,"_blank")},children:t.module_file}),e.jsx("div",{className:"col-span-1 px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.classes}),e.jsx("div",{className:"col-span-1 px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.subject}),e.jsx("div",{className:"col-span-1 px-6 py-4 whitespace-nowrap text-sm uppercase text-gray-500",children:t.streams?t.streams:"null"}),e.jsx("div",{className:"col-span-2 px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(k,{to:`/editCoching/${t._id}`,className:"bg-blue-500 text-white px-3 py-1 rounded-lg text-sm hover:bg-blue-600",children:"Edit"}),e.jsx("button",{onClick:()=>j(t._id),className:"bg-red-500 text-white px-3 py-1 rounded-lg text-sm hover:bg-red-600",children:"Delete"}),e.jsx("button",{onClick:()=>{w(t._id,t.status)},className:`px-3 py-1 rounded-lg text-sm ${t.status?"bg-green-500 text-white":"bg-gray-500 text-gray-300"}`,children:t.status?"Active":"Inactive"})]})})]},s))})]})}),e.jsxs("div",{className:"flex justify-center my-4",children:[e.jsx("button",{onClick:()=>d(a-1),disabled:a===1,className:"px-3 py-1 mx-1 rounded-lg bg-gray-300 text-gray-700",children:"Prev"}),N().map(t=>e.jsx("button",{onClick:()=>d(t),className:`px-3 py-1 mx-1 rounded-lg ${a===t?"bg-blue-500 text-white":"bg-gray-300 text-gray-700"}`,children:t},t)),e.jsx("button",{onClick:()=>d(a+1),disabled:a===u,className:"px-3 py-1 mx-1 rounded-lg bg-gray-300 text-gray-700",children:"Next"})]})]})})})})}export{E as default};
