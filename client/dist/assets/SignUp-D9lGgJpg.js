import{r as i,U as j,u as w,j as e,L as y}from"./index-D2Kp2z1Q.js";function N(){const x=/^[a-zA-Z0-9!@#$%^&*]{6,16}$/,{api:c}=i.useContext(j),p=w(),[a,h]=i.useState({firstname:"",lastname:"",email:"",address:"",city:"",state:"",role:"user",password:"",confirmPassword:"",otp:""}),[s,d]=i.useState({}),[o,m]=i.useState(!1),t=r=>{h({...a,[r.target.name]:r.target.value})},u=()=>{const r={};return a.firstname||(r.firstname="First Name is required"),a.lastname||(r.lastname="Last Name is required"),a.email||(r.email="Email is required"),a.address||(r.address="Address is required"),a.state||(r.state="State is required"),a.city||(r.city="City is required"),a.password||(r.password="Password is required"),a.password!==a.confirmPassword&&(r.confirmPassword="Passwords do not match"),x.test(a.password)||(r.password="Password must be 6-16 characters long and can include letters, numbers, and the following special characters: !@#$%^&*."),o&&!a.otp&&(r.otp="OTP is required"),r},f=async()=>{const r=u();if(Object.keys(r).length===0){m(!0);let l=await fetch(`${c}/getOTP`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});l=await l.json(),l.status?(d(r),m(!0)):(r.email="Email is Already Taken",d(r))}else d(r)},b=async r=>{r.preventDefault();const l=u();if(Object.keys(l).length===0)try{let n=await fetch(`${c}/registerUser`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});n=await n.json(),n.status?p("/login"):(l.otp=n.msg,d(l))}catch(n){console.log(n)}else d(l)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"max-w-2xl mx-auto mt-10 p-4",children:[e.jsx("h1",{className:"text-2xl font-semibold text-center mb-6",children:"Sign Up in Study buddy"}),e.jsxs("form",{className:"space-y-6",onSubmit:b,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700",htmlFor:"firstname",children:"Name"}),e.jsxs("div",{className:"flex  flex-col md:flex-row md:space-x-4 space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"w-full md:w-1/2",children:[e.jsx("input",{id:"firstname",name:"firstname",type:"text",placeholder:"First Name",value:a.firstname,onChange:t,className:`w-full p-2 border focus:outline-none ${s.firstname?"border-red-500":"border-gray-300"} rounded`}),s.firstname&&e.jsx("p",{className:"text-red-500 text-sm",children:s.firstname})]}),e.jsxs("div",{className:"w-full md:w-1/2",children:[e.jsx("input",{id:"lastname",name:"lastname",type:"text",placeholder:"Last Name",value:a.lastname,onChange:t,className:`w-full p-2 border focus:outline-none ${s.lastname?"border-red-500":"border-gray-300"} rounded`}),s.lastname&&e.jsx("p",{className:"text-red-500 text-sm",children:s.lastname})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700",htmlFor:"email",children:"Email Address"}),e.jsx("input",{id:"email",name:"email",type:"email",value:a.email,onChange:t,className:`w-full p-2 border focus:outline-none ${s.email?"border-red-500":"border-gray-300"} rounded`}),s.email&&e.jsx("p",{className:"text-red-500 text-sm",children:s.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700",htmlFor:"address1",children:"Address"}),e.jsx("input",{id:"address",name:"address",type:"text",placeholder:"Street Address",value:a.address,onChange:t,className:`w-full p-2 border focus:outline-none ${s.address?"border-red-500":"border-gray-300"} rounded`}),s.address&&e.jsx("p",{className:"text-red-500 text-sm",children:s.address}),e.jsxs("div",{className:"flex flex-col mt-8 md:flex-row md:space-x-4 space-y-4 md:space-y-0",children:[e.jsx("input",{id:"city",name:"city",type:"text",placeholder:"City",value:a.city,onChange:t,className:`w-full p-2 border focus:outline-none ${s.city?"border-red-500":"border-gray-300"} rounded`}),s.city&&e.jsx("p",{className:"text-red-500 text-sm",children:s.city}),e.jsx("input",{id:"state",name:"state",type:"text",placeholder:"State / Province",value:a.state,onChange:t,className:`w-full p-2 border focus:outline-none ${s.state?"border-red-500":"border-gray-300"} rounded`}),s.state&&e.jsx("p",{className:"text-red-500 text-sm",children:s.state})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700",children:"Role"}),e.jsxs("select",{value:a.role,onChange:t,className:"w-full p-2 border rounded focus:outline-none border-gray-300",name:"role",id:"",children:[e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"coching",children:"Coching Institute"}),e.jsx("option",{value:"tutor",children:"Tutor"}),e.jsx("option",{value:"teacher",children:"Teacher"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700",htmlFor:"password",children:"Password"}),e.jsx("input",{id:"password",name:"password",type:"password",value:a.password,onChange:t,className:`w-full p-2 border focus:outline-none ${s.password?"border-red-500":"border-gray-300"} rounded`}),s.password&&e.jsx("p",{className:"text-red-500 text-sm",children:s.password})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700",htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",onChange:t,className:`w-full p-2 border focus:outline-none ${s.confirmPassword?"border-red-500":"border-gray-300"} rounded`}),s.confirmPassword&&e.jsx("p",{className:"text-red-500 text-sm",children:s.confirmPassword})]}),e.jsxs("div",{className:"mb-4",children:[!o&&e.jsx("button",{type:"button",onClick:f,className:"w-full bg-blue-500 text-white p-2 rounded",children:"Generate OTP"}),o&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-gray-700",children:"OTP"}),e.jsx("input",{type:"text",name:"otp",value:a.otp,onChange:t,className:`w-full p-2 border focus:outline-none ${s.otp?"border-red-500":"border-gray-300"} rounded`}),s.otp&&e.jsx("p",{className:"text-red-500 text-sm",children:s.otp})]})]}),e.jsx("div",{className:"mb-4",children:o&&e.jsx("button",{type:"submit",className:"w-full bg-green-500 text-white p-2 rounded",children:"Register"})})]}),e.jsxs("p",{className:"mt-6 text-center",children:["Already have an account?"," ",e.jsx(y,{to:"/login",className:"text-blue-600",children:"Login"})]})]})})}export{N as default};
